<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>너를 위한 밤</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Nanum+Pen+Script&display=swap');
        :root { --bg-color: #0b0e1d; --flame-color: #ff9d00; }
        body { 
            background: radial-gradient(circle at center, #1b2735 0%, #090a0f 100%); 
            color: white; margin: 0; height: 100vh; 
            display: flex; flex-direction: column; align-items: center; justify-content: flex-start; 
            overflow: hidden; font-family: 'Nanum Pen Script', cursive; 
        }
        .star { position: absolute; background: white; border-radius: 50%; opacity: 0.5; animation: twinkle var(--duration) infinite ease-in-out; }
        @keyframes twinkle { 0%, 100% { opacity: 0.3; transform: scale(1); } 50% { opacity: 1; transform: scale(1.2); box-shadow: 0 0 10px white; } }
        
        h2 { font-size: 2rem; margin-top: 60px; margin-bottom: 40px; text-shadow: 0 0 15px rgba(255, 255, 255, 0.6); z-index: 10; text-align: center; line-height: 1.4; }
        
        .candle-container { display: flex; gap: 40px; margin-bottom: 50px; z-index: 10; }
        .candle { cursor: pointer; position: relative; transition: 0.3s; }
        
        /* 촛불 & 불꽃 */
        .flame { width: 16px; height: 26px; background: var(--flame-color); border-radius: 50% 50% 20% 20%; margin: 0 auto; box-shadow: 0 0 20px 5px var(--flame-color); animation: flicker 0.15s infinite alternate; position: relative; z-index: 2; }
        .stick { width: 20px; height: 60px; background: linear-gradient(to right, #e0e0e0, #ffffff, #d0d0d0); border-radius: 4px; margin: 0 auto; }
        
        /* 연기 애니메이션 */
        .smoke {
            position: absolute; top: 0; left: 50%; transform: translateX(-50%);
            width: 4px; height: 0; background: rgba(255, 255, 255, 0.4);
            filter: blur(4px); border-radius: 50%; pointer-events: none; opacity: 0;
        }
        .candle.off .flame { opacity: 0; transform: scale(0); transition: 0.4s ease-out; }
        .candle.off .smoke { animation: smokeRise 1.5s forwards; }

        @keyframes smokeRise {
            0% { opacity: 0; height: 0; transform: translateX(-50%) translateY(0); }
            20% { opacity: 0.6; }
            100% { opacity: 0; height: 40px; transform: translateX(-50%) translateY(-50px); width: 15px; }
        }

        #letter { 
            position: fixed; top: 30%; left: 50%; transform: translate(-50%, -50%); 
            background: #fff9e6; color: #333; padding: 20px 30px; border-radius: 2px; 
            box-shadow: 5px 5px 20px rgba(0,0,0,0.4); display: none; z-index: 100; 
            font-size: 1.6rem; text-align: center; border-left: 8px solid #d4af37; 
            animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); max-width: 80%; 
        }

        /* 책상과 서랍 */
        .desk-wrapper { position: relative; width: 220px; margin-top: 30px; z-index: 5; }
        .desk-top { height: 15px; background: #4e342e; border-radius: 4px; position: relative; z-index: 6; box-shadow: 0 4px 10px rgba(0,0,0,0.5); }
        .drawer { 
            width: 190px; height: 60px; background: #3e2723; margin: 0 auto; 
            border: 2px solid #2d1d19; border-top: none; position: relative; 
            transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1); 
            display: flex; justify-content: center; top: -2px; cursor: default;
        }
        .drawer.ready { cursor: pointer; animation: shake 0.5s infinite alternate; } /* 다 꺼지면 흔들리는 효과 */
        .handle { width: 40px; height: 8px; background: #b8860b; border-radius: 10px; margin-top: 20px; }
        
        .drawer.open { transform: translateY(60px); }
        .heart { position: absolute; font-size: 60px; bottom: 10px; opacity: 0; z-index: -1; filter: drop-shadow(0 0 15px #ff4d4d); transition: 0.3s; }
        .heart.rise { animation: heartRise 3s forwards ease-out; z-index: 20; }
        
        @keyframes flicker { 0% { transform: rotate(-1deg) scale(1); } 100% { transform: rotate(1deg) scale(1.1); } }
        @keyframes popIn { 0% { opacity: 0; transform: translate(-50%, -20%) scale(0.5); } 100% { opacity: 1; transform: translate(-50%, -50%) scale(1); } }
        @keyframes heartRise { 0% { opacity: 0; transform: scale(0.5) translateY(0); } 20% { opacity: 1; } 100% { opacity: 1; transform: scale(2.5) translateY(-400px); } }
        @keyframes shake { 0% { transform: translateX(0); } 100% { transform: translateX(2px); } }
    </style>
</head>
<body>
    <div id="star-field"></div>
    <h2 id="guide">고요한 밤...<br>세 개의 촛불을 꺼보세요</h2>
    
    <div class="candle-container">
        <div class="candle" onclick="off(this, '서워니야, 요즘 이것저것 힘들 텐데 그래도 잘 버티고 있는 거 알아!')"><div class="smoke"></div><div class="flame"></div><div class="stick"></div></div>
        <div class="candle" onclick="off(this, '완벽하지 않아도 지금처럼만 해도 충분해')"><div class="smoke"></div><div class="flame"></div><div class="stick"></div></div>
        <div class="candle" onclick="off(this, '너는 너 생각보다 훨씬 잘하고 있어!')"><div class="smoke"></div><div class="flame"></div><div class="stick"></div></div>
    </div>
    
    <div id="letter"></div>
    
    <div class="desk-wrapper">
        <div class="desk-top"></div>
        <div id="drawer" class="drawer" onclick="openDrawer()">
            <div class="handle"></div>
            <div id="heart" class="heart">❤️</div>
        </div>
    </div>

    <script>
        // 별 배경 생성
        const starField = document.getElementById('star-field');
        for (let i = 0; i < 80; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            const size = Math.random() * 3 + 'px';
            star.style.width = size; star.style.height = size;
            star.style.top = Math.random() * 100 + '%';
            star.style.left = Math.random() * 100 + '%';
            star.style.setProperty('--duration', (Math.random() * 3 + 2) + 's');
            starField.appendChild(star);
        }

        let count = 0;
        let isReady = false;

        function off(el, text) {
            if(el.classList.contains('off')) return;
            el.classList.add('off');
            count++;
            
            const letter = document.getElementById('letter');
            letter.innerText = text;
            letter.style.display = 'block';
            setTimeout(() => { letter.style.display = 'none'; }, 2000);
            
            if(count === 3) {
                isReady = true;
                setTimeout(() => {
                    document.getElementById('guide').innerHTML = "이제 서랍을 터치해봐!";
                    document.getElementById('drawer').classList.add('ready');
                }, 1500);
            }
        }

        function openDrawer() {
            if(!isReady) return; // 촛불 다 안꺼지면 클릭 안됨
            
            const drawer = document.getElementById('drawer');
            const heart = document.getElementById('heart');
            
            drawer.classList.remove('ready');
            drawer.classList.add('open');
            
            setTimeout(() => {
                heart.classList.add('rise');
            }, 500);
        }
    </script>
</body>
</html>